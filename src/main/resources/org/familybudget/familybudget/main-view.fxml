<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane style="-fx-background-color: #F0F2F5;" xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.familybudget.familybudget.MainController">

    <padding>
        <Insets bottom="20" left="20" right="20" top="20"/>
    </padding>

    <!--  ЛЕВАЯ ПАНЕЛЬ ФИЛЬТРОВ  -->
    <left>
        <VBox alignment="TOP_CENTER" prefWidth="250" spacing="14"
              style="-fx-background-color: #FFFFFF;
                     -fx-background-radius: 14;
                     -fx-padding: 14 12 16 12;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 14, 0, 0, 3);
                     -fx-font-family: 'Segoe UI';">

            <!-- Заголовок фильтров с иконкой -->
            <HBox alignment="CENTER_LEFT" spacing="8">

                <SVGPath content="
        M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5
        m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5
        m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"
                         style="-fx-fill: #222222; -fx-scale-x: 1.3; -fx-scale-y: 1.3;"/>

                <Label text="Фильтры"
                       style="-fx-text-fill: #222222;">
                    <font>
                        <Font name="Segoe UI Semibold" size="18"/>
                    </font>
                </Label>

            </HBox>

            <!-- Тип -->
            <VBox alignment="TOP_LEFT" spacing="4">
                <Label style="-fx-text-fill: #777777; -fx-font-size: 11;" text="Тип операции">
                    <font>
                        <Font size="14.0"/>
                    </font>
                </Label>
                <ComboBox fx:id="typeFilterCombo" prefWidth="180"
                          style="-fx-background-radius: 8;
                                 -fx-background-color: #F5F5F5;
                                 -fx-text-fill: #222222;
                                 -fx-border-color: #DDDDDD;
                                 -fx-border-radius: 8;"/>
            </VBox>

            <!-- Категория -->
            <VBox alignment="TOP_LEFT" spacing="4">
                <Label style="-fx-text-fill: #777777; -fx-font-size: 11;" text="Категория">
                    <font>
                        <Font size="14.0"/>
                    </font>
                </Label>
                <ComboBox fx:id="categoryFilterCombo" prefWidth="180"
                          style="-fx-background-radius: 8;
                                 -fx-background-color: #F5F5F5;
                                 -fx-text-fill: #222222;
                                 -fx-border-color: #DDDDDD;
                                 -fx-border-radius: 8;"/>
            </VBox>

            <!-- Пользователь -->
            <VBox alignment="TOP_LEFT" spacing="4">
                <Label style="-fx-text-fill: #777777; -fx-font-size: 11;" text="Пользователь">
                    <font>
                        <Font size="14.0"/>
                    </font>
                </Label>
                <ComboBox fx:id="userFilterCombo" prefWidth="180"
                          style="-fx-background-radius: 8;
                                 -fx-background-color: #F5F5F5;
                                 -fx-text-fill: #222222;
                                 -fx-border-color: #DDDDDD;
                                 -fx-border-radius: 8;"/>
            </VBox>

            <!-- Даты -->
            <VBox alignment="TOP_LEFT" spacing="4">
                <Label style="-fx-text-fill: #777777; -fx-font-size: 11;" text="Диапазон дат">
                    <font>
                        <Font size="14.0"/>
                    </font>
                </Label>
                <HBox spacing="6">
                    <DatePicker fx:id="fromDatePicker" prefWidth="90" promptText="с" style="-fx-background-radius: 8;"/>
                    <Label style="-fx-text-fill: #777777;" text="—"/>
                    <DatePicker fx:id="toDatePicker" prefWidth="90" promptText="по" style="-fx-background-radius: 8;"/>
                </HBox>
            </VBox>

            <!-- Сброс фильтров (такая же форма/цвет, как обновление) -->
            <Button fx:id="resetFiltersButton"
                    maxWidth="Infinity"
                    onAction="#onResetFiltersClick"
                    style="-fx-background-color: #4C6FFF;
                           -fx-background-radius: 999;
                           -fx-text-fill: white;
                           -fx-font-weight: bold;
                           -fx-padding: 6 14;
                           -fx-font-size: 12;"
                    text="Сбросить"/>

        </VBox>
    </left>

    <!-- ПРАВАЯ ПАНЕЛЬ / ТУЛБАР -->
    <right>
        <VBox alignment="TOP_CENTER" prefWidth="320" spacing="14"
              style="-fx-background-color: #FFFFFF;
                     -fx-background-radius: 14;
                     -fx-padding: 18 16 18 16;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 14, 0, 0, 3);
                     -fx-font-family: 'Segoe UI';">

            <!-- Инфо пользователя -->
            <VBox alignment="TOP_LEFT" spacing="10">

                <HBox spacing="10" alignment="CENTER_LEFT">

                    <SVGPath content="
            M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0
            M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8
            m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10
            s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"
                             style="-fx-fill: #333333; -fx-scale-x: 1.9; -fx-scale-y: 1.9;"/>

                    <VBox alignment="CENTER_LEFT" spacing="2">
                        <Label fx:id="userInfoLabel"
                               style="-fx-text-fill: #222222;
                                      -fx-font-size: 14;
                                      -fx-font-weight: bold;"/>

                        <Label fx:id="familyNameLabel"
                               style="-fx-text-fill: #555555;
                                      -fx-font-size: 13;
                                      -fx-font-weight: bold;"/>
                    </VBox>
                </HBox>

                <Separator style="-fx-background-color: #DDDDDD;"/>

            </VBox>

            <!-- КНОПКИ (белые) -->
            <VBox alignment="TOP_LEFT" spacing="8">

                <Button fx:id="addOperationButton"
                        maxWidth="200"
                        prefHeight="41"
                        onAction="#onAddOperationClick"
                        graphicTextGap="8"
                        style="-fx-background-color: #FFFFFF;
                               -fx-background-radius: 999;
                               -fx-text-fill: #333333;
                               -fx-font-weight: bold;
                               -fx-padding: 7 14;
                               -fx-font-size: 13;"
                        text="Добавить операцию">

                    <graphic>
                        <SVGPath content="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16
                           M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"
                                 style="-fx-fill: #333333; -fx-scale-x: 1.0; -fx-scale-y: 1.0;"/>
                    </graphic>

                </Button>

                <Button fx:id="manageCategoriesButton"
                        maxWidth="220"
                        prefHeight="41"
                        onAction="#onManageCategoriesClick"
                        managed="false"
                        visible="false"
                        graphicTextGap="8"
                        style="-fx-background-color: #FFFFFF;
                               -fx-background-radius: 999;
                               -fx-text-fill: #333333;
                               -fx-font-weight: bold;
                               -fx-padding: 7 14;
                               -fx-font-size: 13;"
                        text="Управлять категориями">

                    <graphic>
                        <SVGPath content="
            M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0
            m-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0
            M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1
            m0 5.586 7 7L13.586 9l-7-7H2z"
                                 style="-fx-fill: #333333; -fx-scale-x: 1.0; -fx-scale-y: 1.0;"/>
                    </graphic>

                </Button>

            </VBox>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Кнопка выхода снизу -->
            <Button fx:id="logoutButton"
                    maxWidth="Infinity"
                    onAction="#onLogoutClick"
                    graphicTextGap="8"
                    style="-fx-background-color: #FF4B55;
               -fx-background-radius: 999;
               -fx-text-fill: white;
               -fx-font-weight: bold;
               -fx-padding: 7 14;
               -fx-font-size: 13;"
                    text="Выйти">

                <graphic>
                    <SVGPath content="
            M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z
            M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"
                             style="-fx-fill: white; -fx-scale-x: 1.0; -fx-scale-y: 1.0;"/>
                </graphic>

            </Button>


        </VBox>
    </right>

    <!-- ЦЕНТРАЛЬНАЯ ЧАСТЬ-->
    <center>
        <VBox alignment="TOP_CENTER" spacing="20">

            <!-- БАЛАНС -->
            <VBox alignment="CENTER" spacing="5">
                <Label style="-fx-text-fill: #777;" text="Текущий баланс"/>
                <Label fx:id="balanceLabel" style="-fx-text-fill: #4C6FFF;">
                    <font>
                        <Font name="Segoe UI Semibold" size="28"/>
                    </font>
                </Label>

                <!-- ОБНОВИТЬ БАЛАНС: тот же цвет и форма, что сброс -->
                <Button onAction="#onRefreshBalance"
                        graphicTextGap="8"
                        style="-fx-background-color: #4C6FFF;
                               -fx-background-radius: 999;
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-padding: 6 14;
                               -fx-font-size: 14;"
                        text="Обновить баланс">

                    <graphic>
                        <SVGPath content="M17.65 6.35A8 8 0 1 0 20 12h-2a6 6 0 1 1-1.76-4.24L14 10h6V4l-2.35 2.35Z"
                                 style="-fx-fill: white; -fx-scale-x: 0.9; -fx-scale-y: 0.9;"/>
                    </graphic>

                </Button>

            </VBox>

            <Label style="-fx-text-fill: #444;" text="История операций">
                <font>
                    <Font name="Segoe UI Semibold" size="18"/>
                </font>
            </Label>

            <!-- Блок операций -->
            <VBox maxWidth="820" spacing="0"
                  style="-fx-background-color: white;
                         -fx-background-radius: 12;
                         -fx-border-radius: 12;
                         -fx-border-color: #DDDDDD;
                         -fx-padding: 12 12 12 12;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 12, 0, 0, 2);">

                <HBox spacing="0" style="-fx-padding: 0 4 6 4;">
                    <Label prefWidth="150" style="-fx-text-fill: #777; -fx-font-size: 14;" text="Сумма"/>
                    <Label prefWidth="250" style="-fx-text-fill: #777; -fx-font-size: 14;" text="Категория"/>
                    <Label prefWidth="200" style="-fx-text-fill: #777; -fx-font-size: 14;" text="Пользователь"/>
                    <Label prefWidth="180" style="-fx-text-fill: #777; -fx-font-size: 14;" text="Дата"/>
                </HBox>

                <ListView fx:id="operationsList" prefHeight="320"
                          style="-fx-background-color: white;
                                 -fx-control-inner-background: white;
                                 -fx-padding: 0;
                                 -fx-background-insets: 0;
                                 -fx-border-insets: 0;"/>

            </VBox>

            <!-- ОБНОВИТЬ ОПЕРАЦИИ: тот же стиль, что ОБНОВИТЬ БАЛАНС -->
            <HBox alignment="CENTER">
                <Button fx:id="refreshOperationsButton"
                        graphicTextGap="8"
                        style="-fx-background-color: #4C6FFF;
                               -fx-background-radius: 999;
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-padding: 6 14;
                               -fx-font-size: 14;"
                        text="Обновить операции">

                    <graphic>
                        <SVGPath content="M17.65 6.35A8 8 0 1 0 20 12h-2a6 6 0 1 1-1.76-4.24L14 10h6V4l-2.35 2.35Z"
                                 style="-fx-fill: white; -fx-scale-x: 0.9; -fx-scale-y: 0.9;"/>
                    </graphic>

                </Button>
            </HBox>

            <Label fx:id="statusLabel" style="-fx-text-fill: #D32F2F; -fx-font-size: 12;"/>
        </VBox>
    </center>

</BorderPane>
